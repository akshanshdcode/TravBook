{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect,useContext}from\"react\";import\"../styles/tour-details.css\";import{Container,Row,Col,Form,ListGroup}from\"reactstrap\";import{useNavigate,useParams}from\"react-router-dom\";import calculateAvgRating from\"../utils/avgRating\";import avatar from\"../assets/images/avatar.jpg\";import Booking from\"../components/Booking/Booking\";import Newsletter from\"../shared/Newsletter\";import useFetch from\"../hooks/useFetch\";import{BASE_URL}from\"../utils/config\";import{AuthContext}from\"../context/AuthContext\";import'../shared/tour-card.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TourDetails=function TourDetails(){var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var reviewMsgRef=useRef(\"\");var _useState=useState(null),_useState2=_slicedToArray(_useState,2),tourRating=_useState2[0],setTourRating=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;var _useFetch=useFetch(\"\".concat(BASE_URL,\"/tours/\").concat(id)),tour=_useFetch.data,loading=_useFetch.loading,error=_useFetch.error;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),reviews=_useState4[0],setReviews=_useState4[1];var _ref=tour||{},photo=_ref.photo,title=_ref.title,desc=_ref.desc,price=_ref.price,city=_ref.city,address=_ref.address,distance=_ref.distance,maxGroupSize=_ref.maxGroupSize,providerName=_ref.providerName;var _calculateAvgRating=calculateAvgRating(reviews),avgRating=_calculateAvgRating.avgRating;var options={day:\"numeric\",month:\"long\",year:\"numeric\"};var submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var reviewText,reviewObj,res,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();reviewText=reviewMsgRef.current.value;if(user){_context.next=4;break;}return _context.abrupt(\"return\",alert(\"Please sign in\"));case 4:if(tourRating){_context.next=6;break;}return _context.abrupt(\"return\",alert(\"Please select a rating\"));case 6:reviewObj={username:user===null||user===void 0?void 0:user.username,reviewText:reviewText,rating:tourRating};_context.prev=7;_context.next=10;return fetch(\"\".concat(BASE_URL,\"/review/\").concat(id),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\",body:JSON.stringify(reviewObj)});case 10:res=_context.sent;_context.next=13;return res.json();case 13:result=_context.sent;if(res.ok){_context.next=16;break;}return _context.abrupt(\"return\",alert(result.message));case 16:// Update the reviews state to include the new review\nsetReviews(function(prevReviews){return[].concat(_toConsumableArray(prevReviews),[reviewObj]);});alert(result.message);_context.next=23;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](7);alert(_context.t0.message);case 23:case\"end\":return _context.stop();}},_callee,null,[[7,20]]);}));return function submitHandler(_x){return _ref2.apply(this,arguments);};}();var deleteTour=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(BASE_URL,\"/tours/\").concat(id),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(localStorage.getItem('token'))}});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(res.ok){_context2.next=9;break;}return _context2.abrupt(\"return\",alert(result.message));case 9:alert(result.message);navigate(\"/tours\");_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);alert(_context2.t0.message);case 16:case\"end\":return _context2.stop();}},_callee2,null,[[0,13]]);}));return function deleteTour(){return _ref3.apply(this,arguments);};}();useEffect(function(){window.scrollTo(0,0);},[tour]);useEffect(function(){if(tour&&tour.reviews){setReviews(tour.reviews);}},[tour]);return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(Container,{children:[loading&&/*#__PURE__*/_jsx(\"h4\",{className:\"text-center pt-5\",children:\"LOADING.........\"}),error&&/*#__PURE__*/_jsx(\"h4\",{className:\"text-center pt-5\",children:error}),!loading&&!error&&/*#__PURE__*/_jsxs(_Fragment,{children:[!user&&navigate(\"/login\"),user&&user.role!==\"user\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"tour__content\",children:[/*#__PURE__*/_jsx(\"img\",{src:photo,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour__info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-5\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"tour__rating d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-fill\",style:{color:\"var(--secondary-color)\"}}),\" \",avgRating===0?null:avgRating,avgRating===0?\"Not rated\":/*#__PURE__*/_jsxs(\"span\",{children:[\"(\",reviews===null||reviews===void 0?void 0:reviews.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-fill\"}),\" \",address]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour__extra-details\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-2-line\"}),\" \",city]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-money-dollar-circle-line\"}),\" \",price,\"/ per person\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-time-line\"}),\" \",distance,\" k/m\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-group-line\"}),\" \",maxGroupSize,\" people\"]})]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:desc}),user&&user.role===\"admin\"&&/*#__PURE__*/_jsx(\"div\",{style:{margin:'8px',display:'flex',flexDirection:'row',justifyContent:'right'},children:/*#__PURE__*/_jsx(\"button\",{style:{margin:'4px'},className:\"booking__btn\",onClick:deleteTour,children:\"Delete Tour\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour__reviews mt-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Reviews (\",reviews===null||reviews===void 0?void 0:reviews.length,\" reviews)\"]}),/*#__PURE__*/_jsx(Form,{onSubmit:submitHandler,children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-3 mb-4 rating__group\",children:[/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(1);},children:[\"1 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(2);},children:[\"2 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(3);},children:[\"3 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(4);},children:[\"4 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(5);},children:[\"5 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]})]})}),/*#__PURE__*/_jsx(ListGroup,{className:\"user__reviews\",children:reviews===null||reviews===void 0?void 0:reviews.map(function(review){return/*#__PURE__*/_jsxs(\"div\",{className:\"review__item\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatar,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:review.username}),/*#__PURE__*/_jsx(\"p\",{children:new Date(review.createdAt).toLocaleDateString(\"en-US\",options)})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"d-flex align-items-center\",children:[review.rating,/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]})]}),/*#__PURE__*/_jsx(\"h6\",{children:review.reviewText})]})]},review._id);})})]})]}),user&&user.role===\"user\"&&tour&&/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:\"8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tour__content\",children:[/*#__PURE__*/_jsx(\"img\",{src:photo,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour__info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-5\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"tour__rating d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-fill\",style:{color:\"var(--secondary-color)\"}}),\" \",avgRating===0?null:avgRating,avgRating===0?\"Not rated\":/*#__PURE__*/_jsxs(\"span\",{children:[\"(\",reviews===null||reviews===void 0?void 0:reviews.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-fill\"}),\" \",address]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour__extra-details\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-2-line\"}),\" \",city]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-money-dollar-circle-line\"}),\" \",price,\"/ per person\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-map-pin-time-line\"}),\" \",distance,\" k/m\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-group-line\"}),\" \",maxGroupSize,\" people\"]})]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Provider: \",providerName]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:desc})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour__reviews mt-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Reviews (\",reviews===null||reviews===void 0?void 0:reviews.length,\" reviews)\"]}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-3 mb-4 rating__group\",children:[/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(1);},children:[\"1 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(2);},children:[\"2 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(3);},children:[\"3 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(4);},children:[\"4 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]}),/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setTourRating(5);},children:[\"5 \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"review__input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:reviewMsgRef,placeholder:\"share your thoughts\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary__btn text-white\",type:\"submit\",children:\"Submit\"})]})]}),/*#__PURE__*/_jsx(ListGroup,{className:\"user__reviews\",children:reviews===null||reviews===void 0?void 0:reviews.map(function(review){return/*#__PURE__*/_jsxs(\"div\",{className:\"review__item\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatar,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:review.username}),/*#__PURE__*/_jsx(\"p\",{children:new Date(review.createdAt).toLocaleDateString(\"en-US\",options)})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"d-flex align-items-center\",children:[review.rating,/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"})]})]}),/*#__PURE__*/_jsx(\"h6\",{children:review.reviewText})]})]},review._id);})})]})]})}),/*#__PURE__*/_jsx(Col,{lg:\"4\",children:/*#__PURE__*/_jsx(Booking,{tour:tour,avgRating:avgRating})})]})]})]}),/*#__PURE__*/_jsx(Newsletter,{})]});};export default TourDetails;","map":{"version":3,"names":["React","useState","useRef","useEffect","useContext","Container","Row","Col","Form","ListGroup","useNavigate","useParams","calculateAvgRating","avatar","Booking","Newsletter","useFetch","BASE_URL","AuthContext","TourDetails","navigate","id","reviewMsgRef","tourRating","setTourRating","user","tour","data","loading","error","reviews","setReviews","photo","title","desc","price","city","address","distance","maxGroupSize","providerName","avgRating","options","day","month","year","submitHandler","e","preventDefault","reviewText","current","value","alert","reviewObj","username","rating","fetch","method","headers","credentials","body","JSON","stringify","res","json","result","ok","message","prevReviews","deleteTour","localStorage","getItem","window","scrollTo","role","color","length","margin","display","flexDirection","justifyContent","map","review","Date","createdAt","toLocaleDateString","_id"],"sources":["/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/src/pages/TourDetails.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useContext } from \"react\";\nimport \"../styles/tour-details.css\";\nimport { Container, Row, Col, Form, ListGroup } from \"reactstrap\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport calculateAvgRating from \"../utils/avgRating\";\nimport avatar from \"../assets/images/avatar.jpg\";\nimport Booking from \"../components/Booking/Booking\";\nimport Newsletter from \"../shared/Newsletter\";\nimport useFetch from \"../hooks/useFetch\";\nimport { BASE_URL } from \"../utils/config\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport '../shared/tour-card.css';\n\nconst TourDetails = () => {\n  const navigate = useNavigate();\n  const { id } = useParams();\n  const reviewMsgRef = useRef(\"\");\n  const [tourRating, setTourRating] = useState(null);\n  const { user } = useContext(AuthContext);\n\n  const { data: tour, loading, error } = useFetch(`${BASE_URL}/tours/${id}`);\n  const [reviews, setReviews] = useState([]);\n\n  const {\n    photo,\n    title,\n    desc,\n    price,\n    city,\n    address,\n    distance,\n    maxGroupSize,\n    providerName,\n  } = tour || {};\n\n  const { avgRating } = calculateAvgRating(reviews);\n\n  const options = { day: \"numeric\", month: \"long\", year: \"numeric\" };\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    const reviewText = reviewMsgRef.current.value;\n\n    if (!user) {\n      return alert(\"Please sign in\");\n    }\n    if (!tourRating) {\n      return alert(\"Please select a rating\");\n    }\n\n    const reviewObj = {\n      username: user?.username,\n      reviewText,\n      rating: tourRating,\n    };\n\n    try {\n      const res = await fetch(`${BASE_URL}/review/${id}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n        body: JSON.stringify(reviewObj),\n      });\n\n      const result = await res.json();\n      if (!res.ok) {\n        return alert(result.message);\n      }\n      // Update the reviews state to include the new review\n      setReviews((prevReviews) => [...prevReviews, reviewObj]);\n      alert(result.message);\n    } catch (error) {\n      alert(error.message);\n    }\n  };\n\n  const deleteTour = async () => {\n    try {\n      const res = await fetch(`${BASE_URL}/tours/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${localStorage.getItem('token')}`,\n        },\n      });\n      const result = await res.json();\n      if (!res.ok) {\n        return alert(result.message);\n      }\n      alert(result.message);\n      navigate(\"/tours\");\n    } catch (error) {\n      alert(error.message);\n    }\n  };\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [tour]);\n\n  useEffect(() => {\n    if (tour && tour.reviews) {\n      setReviews(tour.reviews);\n    }\n  }, [tour]);\n\n  return (\n    <section>\n      <Container>\n        {loading && <h4 className=\"text-center pt-5\">LOADING.........</h4>}\n        {error && <h4 className=\"text-center pt-5\">{error}</h4>}\n        {!loading && !error && (\n          <>\n            {!user && navigate(\"/login\")}\n            {user && user.role !== \"user\" && (\n              <div className=\"tour__content\">\n                <img src={photo} alt=\"\" />\n\n                <div className=\"tour__info\">\n                  <h2>{title}</h2>\n                  <div className=\"d-flex align-items-center gap-5\">\n                    <span className=\"tour__rating d-flex align-items-center gap-1\">\n                      <i\n                        className=\"ri-star-fill\"\n                        style={{ color: \"var(--secondary-color)\" }}\n                      ></i>{\" \"}\n                      {avgRating === 0 ? null : avgRating}\n                      {avgRating === 0 ? (\n                        \"Not rated\"\n                      ) : (\n                        <span>({reviews?.length})</span>\n                      )}\n                    </span>\n\n                    <span>\n                      <i className=\"ri-map-pin-fill\"></i> {address}\n                    </span>\n                  </div>\n\n                  <div className=\"tour__extra-details\">\n                    <span>\n                      <i className=\"ri-map-pin-2-line\"></i> {city}\n                    </span>\n                    <span>\n                      <i className=\"ri-money-dollar-circle-line\"></i> {price}/ per person\n                    </span>\n                    <span>\n                      <i className=\"ri-map-pin-time-line\"></i> {distance} k/m\n                    </span>\n                    <span>\n                      <i className=\"ri-group-line\"></i> {maxGroupSize} people\n                    </span>\n                  </div>\n                  <h5>Description</h5>\n                  <p>{desc}</p>\n                  {user && user.role === \"admin\" && (\n                    <div style={{ margin: '8px', display: 'flex', flexDirection: 'row', justifyContent: 'right' }}>\n                      {/* can add edit tour here */}\n                      <button style={{ margin: '4px' }} className=\"booking__btn\" onClick={deleteTour}>Delete Tour</button>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"tour__reviews mt-4\">\n                  <h4>Reviews ({reviews?.length} reviews)</h4>\n\n                  <Form onSubmit={submitHandler}>\n                    <div className=\"d-flex align-items-center gap-3 mb-4 rating__group\">\n                      <span onClick={() => setTourRating(1)}>\n                        1 <i className=\"ri-star-s-fill\"></i>\n                      </span>\n                      <span onClick={() => setTourRating(2)}>\n                        2 <i className=\"ri-star-s-fill\"></i>\n                      </span>\n                      <span onClick={() => setTourRating(3)}>\n                        3 <i className=\"ri-star-s-fill\"></i>\n                      </span>\n                      <span onClick={() => setTourRating(4)}>\n                        4 <i className=\"ri-star-s-fill\"></i>\n                      </span>\n                      <span onClick={() => setTourRating(5)}>\n                        5 <i className=\"ri-star-s-fill\"></i>\n                      </span>\n                    </div>\n                  </Form>\n\n                  <ListGroup className=\"user__reviews\">\n                    {reviews?.map((review) => (\n                      <div className=\"review__item\" key={review._id}>\n                        <img src={avatar} alt=\"\" />\n\n                        <div className=\"w-100\">\n                          <div className=\"d-flex align-items-center justify-content-between\">\n                            <div>\n                              <h5>{review.username}</h5>\n                              <p>\n                                {new Date(review.createdAt).toLocaleDateString(\"en-US\", options)}\n                              </p>\n                            </div>\n\n                            <span className=\"d-flex align-items-center\">\n                              {review.rating}\n                              <i className=\"ri-star-s-fill\"></i>\n                            </span>\n                          </div>\n\n                          <h6>{review.reviewText}</h6>\n                        </div>\n                      </div>\n                    ))}\n                  </ListGroup>\n                </div>\n              </div>\n            )}\n\n            {user && user.role === \"user\" && tour && (\n              <Row>\n                <Col lg=\"8\">\n                  <div className=\"tour__content\">\n                    <img src={photo} alt=\"\" />\n\n                    <div className=\"tour__info\">\n                      <h2>{title}</h2>\n                      <div className=\"d-flex align-items-center gap-5\">\n                        <span className=\"tour__rating d-flex align-items-center gap-1\">\n                          <i\n                            className=\"ri-star-fill\"\n                            style={{ color: \"var(--secondary-color)\" }}\n                          ></i>{\" \"}\n                          {avgRating === 0 ? null : avgRating}\n                          {avgRating === 0 ? (\n                            \"Not rated\"\n                          ) : (\n                            <span>({reviews?.length})</span>\n                          )}\n                        </span>\n\n                        <span>\n                          <i className=\"ri-map-pin-fill\"></i> {address}\n                        </span>\n                      </div>\n\n                      <div className=\"tour__extra-details\">\n                        <span>\n                          <i className=\"ri-map-pin-2-line\"></i> {city}\n                        </span>\n                        <span>\n                          <i className=\"ri-money-dollar-circle-line\"></i> {price}/ per person\n                        </span>\n                        <span>\n                          <i className=\"ri-map-pin-time-line\"></i> {distance} k/m\n                        </span>\n                        <span>\n                          <i className=\"ri-group-line\"></i> {maxGroupSize} people\n                        </span>\n                        \n                      </div>\n                      <h5>\n                          Provider: {providerName}\n                      </h5>\n                      <h5>Description</h5>\n                      <p>{desc}</p>\n                    </div>\n\n                    <div className=\"tour__reviews mt-4\">\n                      <h4>Reviews ({reviews?.length} reviews)</h4>\n\n                      <Form onSubmit={submitHandler}>\n                        <div className=\"d-flex align-items-center gap-3 mb-4 rating__group\">\n                          <span onClick={() => setTourRating(1)}>\n                            1 <i className=\"ri-star-s-fill\"></i>\n                          </span>\n                          <span onClick={() => setTourRating(2)}>\n                            2 <i className=\"ri-star-s-fill\"></i>\n                          </span>\n                          <span onClick={() => setTourRating(3)}>\n                            3 <i className=\"ri-star-s-fill\"></i>\n                          </span>\n                          <span onClick={() => setTourRating(4)}>\n                            4 <i className=\"ri-star-s-fill\"></i>\n                          </span>\n                          <span onClick={() => setTourRating(5)}>\n                            5 <i className=\"ri-star-s-fill\"></i>\n                          </span>\n                        </div>\n\n                        <div className=\"review__input\">\n                          <input\n                            type=\"text\"\n                            ref={reviewMsgRef}\n                            placeholder=\"share your thoughts\"\n                            required\n                          />\n                          <button\n                            className=\"btn primary__btn text-white\"\n                            type=\"submit\"\n                          >\n                            Submit\n                          </button>\n                        </div>\n                      </Form>\n\n                      <ListGroup className=\"user__reviews\">\n                        {reviews?.map((review) => (\n                          <div className=\"review__item\" key={review._id}>\n                            <img src={avatar} alt=\"\" />\n\n                            <div className=\"w-100\">\n                              <div className=\"d-flex align-items-center justify-content-between\">\n                                <div>\n                                  <h5>{review.username}</h5>\n                                  <p>\n                                    {new Date(review.createdAt).toLocaleDateString(\"en-US\", options)}\n                                  </p>\n                                </div>\n\n                                <span className=\"d-flex align-items-center\">\n                                  {review.rating}\n                                  <i className=\"ri-star-s-fill\"></i>\n                                </span>\n                              </div>\n\n                              <h6>{review.reviewText}</h6>\n                            </div>\n                          </div>\n                        ))}\n                      </ListGroup>\n                    </div>\n                  </div>\n                </Col>\n\n                <Col lg=\"4\">\n                  <Booking tour={tour} avgRating={avgRating} />\n                </Col>\n              </Row>\n            )}\n          </>\n        )}\n      </Container>\n      <Newsletter />\n    </section>\n  );\n};\n\nexport default TourDetails;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}