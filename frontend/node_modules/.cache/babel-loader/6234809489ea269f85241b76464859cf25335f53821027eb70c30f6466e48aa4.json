{"ast":null,"code":"var _jsxFileName = \"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/src/pages/Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext.js';\nimport '../styles/profile.css';\nimport { BASE_URL } from '../utils/config.js';\nimport TourCard from '../shared/TourCard.jsx';\nimport '../shared/tour-card.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const BookingCard = _ref => {\n    let {\n      booking\n    } = _ref;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#faa935'\n      },\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: booking.tourName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Guests: \", booking.guestSize]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Date: \", new Date(booking.bookAt).toLocaleDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this);\n  };\n  const deleteTour = async tour => {\n    try {\n      const res = await fetch(`${BASE_URL}/delete/${tour._id}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      const result = await res.json();\n      fetchTours();\n      if (!res.ok) {\n        return alert(result.message);\n      }\n      alert(result.message);\n    } catch (error) {\n      alert(error.message);\n    }\n  };\n  const [bookings, setBookings] = useState(null);\n  useEffect(() => {\n    if (user) {\n      fetchBookings();\n    }\n  }, [user]);\n  const fetchBookings = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/booking/${user === null || user === void 0 ? void 0 : user._id}`);\n      const data = await response.json();\n      setBookings(data.reverse());\n    } catch (error) {\n      console.error('Failed to fetch expenses:', error);\n    }\n  };\n  const [tours, setTours] = useState(null);\n  useEffect(() => {\n    if (user) {\n      fetchTours();\n    }\n  }, [user]);\n  const fetchTours = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/tours/provider/${user === null || user === void 0 ? void 0 : user._id}`);\n      const data = await response.json();\n      setTours(data.reverse());\n    } catch (error) {\n      console.error('Failed to fetch expenses:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"User Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"whole-profile-info\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://api.multiavatar.com/kathrin.svg\",\n            alt: \"Profile Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: [\"Email: \", user.email]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [user && user.role === \"user\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mt-5 mb-3\",\n          children: \"Your Bookings:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row row-cols-1 row-cols-md-3 g-4\",\n          children: bookings && bookings.map((booking, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: /*#__PURE__*/_jsxDEV(BookingCard, {\n              booking: booking\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), user && user.role === \"provider\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mt-5 mb-3\",\n          children: \"Your Tours:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row row-cols-1 row-cols-md-3 g-4\",\n          children: tours && tours.map((tour, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: [/*#__PURE__*/_jsxDEV(TourCard, {\n              tour: tour\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \" booking__btn\",\n              onClick: () => deleteTour(tour),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"5F1X222PU2mhNZkHMdheftneQa4=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","BASE_URL","TourCard","Profile","user","BookingCard","booking","backgroundColor","tourName","guestSize","Date","bookAt","toLocaleDateString","deleteTour","tour","res","fetch","_id","method","headers","localStorage","getItem","result","json","fetchTours","ok","alert","message","error","bookings","setBookings","fetchBookings","response","data","reverse","console","tours","setTours","username","email","role","map","index"],"sources":["/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/src/pages/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport { AuthContext } from '../context/AuthContext.js'\nimport '../styles/profile.css'\nimport { BASE_URL } from '../utils/config.js'\nimport TourCard from '../shared/TourCard.jsx'\nimport '../shared/tour-card.css'\n\nconst Profile = () => {\n  const { user } = useContext(AuthContext);\n\n  const BookingCard = ({ booking }) => {\n    return (\n      <div style={{ backgroundColor: '#faa935' }} className=\"card\">\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">{booking.tourName}</h5>\n          <p className=\"card-text\">Guests: {booking.guestSize}</p>\n          <p className=\"card-text\">Date: {new Date(booking.bookAt).toLocaleDateString()}</p>\n        </div>\n      </div>\n    );\n  };\n\n\n  const deleteTour = async (tour) => {\n    try {\n      const res = await fetch(`${BASE_URL}/delete/${tour._id}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${localStorage.getItem('token')}`,\n        },\n      });\n      const result = await res.json();\n      fetchTours();\n      if (!res.ok) {\n        return alert(result.message);\n      }\n      alert(result.message);\n    } catch (error) {\n      alert(error.message);\n    }\n  };\n\n  const [bookings, setBookings] = useState(null);\n  useEffect(() => {\n    if (user) {\n      fetchBookings();\n    }\n  }, [user]);\n\n  const fetchBookings = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/booking/${user?._id}`);\n      const data = await response.json();\n      setBookings(data.reverse());\n    } catch (error) {\n      console.error('Failed to fetch expenses:', error);\n    }\n  };\n\n  const [tours, setTours] = useState(null);\n  useEffect(() => {\n    if (user) {\n      fetchTours();\n    }\n  }, [user]);\n\n  const fetchTours = async() => {\n    try {\n      const response = await fetch(`${BASE_URL}/tours/provider/${user?._id}`);\n      const data = await response.json();\n      setTours(data.reverse());\n    } catch (error) {\n      console.error('Failed to fetch expenses:', error);\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"container\">\n        <h2>User Profile</h2>\n        <div className='whole-profile-info'>\n          <div className=\"profile-info\">\n            <img src=\"https://api.multiavatar.com/kathrin.svg\" alt=\"Profile Picture\" />\n            <div className='info'>\n              <h1>{user.username}</h1>\n              <h5>Email: {user.email}</h5>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"container\">\n      {user && user.role === \"user\" && (\n        <div>\n        <h3 className=\"mt-5 mb-3\">Your Bookings:</h3>\n      \n        <div className=\"row row-cols-1 row-cols-md-3 g-4\">\n          {bookings && bookings.map((booking, index) => (\n            <div className=\"col\" key={index}>\n              <BookingCard booking={booking} />\n            </div>\n          ))}\n        </div>\n        </div>\n        )}\n        {user && user.role === \"provider\" && (\n        <div>\n        <h3 className=\"mt-5 mb-3\">Your Tours:</h3>\n      \n        <div className=\"row row-cols-1 row-cols-md-3 g-4\">\n          {tours && tours.map((tour, index) => (\n            <div className=\"col\" key={index}>\n              <TourCard tour={tour} />\n              <button className=' booking__btn' onClick={() => deleteTour(tour)}>Delete</button>\n            </div>\n          ))}\n        </div>\n        </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}