{"ast":null,"code":"import _defineProperty from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from'react';import'../styles/expense-tracker.css';import'../shared/tour-card.css';import'bootstrap/dist/css/bootstrap.min.css';import{AuthContext}from'../context/AuthContext';import{BASE_URL}from'../utils/config';import{Link,Navigate,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyExpense=function MyExpense(){var navigate=useNavigate();var TripCard=function TripCard(_ref){var trip=_ref.trip;return/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'#faa935'},className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:trip.tourName}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-title\",children:[\"Date: \",new Date(trip.date).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(Link,{to:\"/trip/\".concat(trip._id),children:/*#__PURE__*/_jsx(\"button\",{className:\"expense__btn\",children:\"View Expenses\"})})]})});};var today=new Date().toISOString().split('T')[0];var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),trips=_useState2[0],setTrips=_useState2[1];var _useState3=useState({userId:user&&user._id,tourName:'',date:today}),_useState4=_slicedToArray(_useState3,2),newTrip=_useState4[0],setNewTrip=_useState4[1];useEffect(function(){if(user){fetchTrips();}},[user]);var fetchTrips=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(BASE_URL,\"/trips/\").concat(user===null||user===void 0?void 0:user._id));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setTrips(data.reverse());_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error('Failed to fetch expenses:',_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchTrips(){return _ref2.apply(this,arguments);};}();var addTrip=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return fetch(\"\".concat(BASE_URL,\"/trips/\").concat(user===null||user===void 0?void 0:user._id),{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify(newTrip)});case 4:response=_context2.sent;_context2.next=7;return response.json();case 7:data=_context2.sent;alert(\"Trip Added\");setNewTrip(_objectSpread(_objectSpread({},newTrip),{},{tourName:''}));fetchTrips();if(response.ok){_context2.next=13;break;}return _context2.abrupt(\"return\",alert(data.message));case 13:return _context2.abrupt(\"return\",data.tripId);case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](1);alert(_context2.t0.message);console.error('Failed to add trip:',_context2.t0);case 20:case\"end\":return _context2.stop();}},_callee2,null,[[1,16]]);}));return function addTrip(_x){return _ref3.apply(this,arguments);};}();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setNewTrip(_objectSpread(_objectSpread({},newTrip),{},_defineProperty({},name,value)));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"Expense Tracker\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addTrip,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"form-label\",children:\"Trip Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"tourName\",name:\"tourName\",value:newTrip.tourName,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",className:\"form-label\",children:\"Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",id:\"date\",name:\"date\",value:newTrip.date,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:'#faa935',color:'#000',border:'none'},type:\"submit\",className:\"btn btn-primary\",children:\"Add Trip\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mt-5 mb-3\",children:\"Trips:\"}),trips&&trips.map(function(trip,index){return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px'},className:\"col\",children:/*#__PURE__*/_jsx(TripCard,{trip:trip})},index);})]})]});};export default MyExpense;","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","BASE_URL","Link","Navigate","useNavigate","MyExpense","navigate","TripCard","trip","backgroundColor","display","justifyContent","tourName","Date","date","toLocaleDateString","_id","today","toISOString","split","user","trips","setTrips","userId","newTrip","setNewTrip","fetchTrips","fetch","response","json","data","reverse","console","error","addTrip","e","preventDefault","method","headers","credentials","body","JSON","stringify","alert","ok","message","tripId","handleChange","target","name","value","color","border","map","index","marginTop"],"sources":["/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/src/pages/MyExpense.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport '../styles/expense-tracker.css'\nimport '../shared/tour-card.css'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { AuthContext } from '../context/AuthContext'\nimport { BASE_URL } from '../utils/config'\nimport { Link, Navigate, useNavigate } from 'react-router-dom'\n\nconst MyExpense = () => {\n\n  const navigate = useNavigate()\n\n  const TripCard = ({ trip }) => {\n    return (\n      <div style={{ backgroundColor: '#faa935' }} className=\"card\">\n        <div style={{display: 'flex', justifyContent: 'space-between'}} className=\"card-body\">\n          <div>\n          <h5 className=\"card-title\">{trip.tourName}</h5>\n          <p className=\"card-title\">Date: {new Date(trip.date).toLocaleDateString()}</p>\n          </div>\n          <Link to={`/trip/${trip._id}`}>\n          <button className='expense__btn'>View Expenses</button>\n          </Link>\n        </div>\n      </div>\n    );\n  };\n\n  const today = new Date().toISOString().split('T')[0];\n\n  const { user } = useContext(AuthContext)\n\n  const [trips, setTrips] = useState(null);\n  const [newTrip, setNewTrip] = useState({\n    userId: user && user._id, tourName: '', date: today,\n  });\n\n  useEffect(() => {\n    if(user){\n      fetchTrips();\n    }\n  }, [user]);\n\n  const fetchTrips = async () => {\n    \n    try {\n      const response = await fetch(`${BASE_URL}/trips/${user?._id}`);\n      const data = await response.json();\n      setTrips(data.reverse());\n    } catch (error) {\n      console.error('Failed to fetch expenses:', error);\n    }\n  };\n\n  const addTrip = async (e) => {\n    e.preventDefault();\n    try {\n       const response = await fetch(`${BASE_URL}/trips/${user?._id}`, {\n          method: 'POST',\n          headers: {\n             'Content-Type': 'application/json',\n          },\n          credentials: 'include',\n          body: JSON.stringify(newTrip),\n       });\n       const data = await response.json();\n       alert(\"Trip Added\")\n        setNewTrip({ ...newTrip, tourName: '' });\n        fetchTrips();\n        \n       if(!response.ok) {\n          return alert(data.message)\n       }\n       return data.tripId;\n    } catch (error) {\n       alert(error.message)\n       console.error('Failed to add trip:', error);\n    }\n  };\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setNewTrip({ ...newTrip, [name]: value });\n  };\n\n  return (\n    <div className=\"container mt-5\">\n      <h1 className=\"mb-4\">Expense Tracker</h1>\n      <form onSubmit={addTrip}>\n        <div className=\"mb-3\">\n          <label htmlFor=\"description\" className=\"form-label\">Trip Name:</label>\n          <input type=\"text\" className=\"form-control\" id=\"tourName\" name=\"tourName\" value={newTrip.tourName} onChange={handleChange} required />\n        </div>\n        <div className=\"mb-3\">\n          <label htmlFor=\"date\" className=\"form-label\">Date:</label>\n          <input type=\"date\" className=\"form-control\" id=\"date\" name=\"date\" value={newTrip.date} onChange={handleChange}  required/>\n        </div>\n        <button style={{backgroundColor: '#faa935', color: '#000', border: 'none'}} type=\"submit\" className=\"btn btn-primary\">Add Trip</button>\n      </form>\n      <div>\n        <h3 className=\"mt-5 mb-3\">Trips:</h3>\n          {trips && trips.map((trip, index) => (\n            <div style={{marginTop: '10px'}} className=\"col\" key={index}>\n              <TripCard trip={trip} />\n            </div>\n          ))}\n        </div>\n        </div>\n  )\n}\n\nexport default MyExpense;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}