{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from'react';import{AuthContext}from'../context/AuthContext.js';import{BASE_URL}from'../utils/config.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Bookings=function Bookings(){var _useContext=useContext(AuthContext),user=_useContext.user;var BookingCard=function BookingCard(_ref){var booking=_ref.booking;return/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'#faa935'},className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:booking.tourName}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-title\",children:[\"Booked by: \",booking.fullName,\" | Email: \",booking.userEmail,\"  |  Phone no: \",booking.phone]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Guests: \",booking.guestSize]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Booked for: \",new Date(booking.bookAt).toLocaleDateString()]})]})});};var BookingCardAdmin=function BookingCardAdmin(_ref2){var book=_ref2.book;return/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'#faa935'},className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:book.tourName}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-title\",children:[\"Booked by: \",book.fullName,\" | Email: \",book.userEmail,\" | Phone no: \",book.phone]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-title\",children:[\"Provider Id: \",book.providerId]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Guests: \",book.guestSize]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Booked for: \",new Date(book.bookAt).toLocaleDateString()]})]})});};var _useState=useState(null),_useState2=_slicedToArray(_useState,2),bookings=_useState2[0],setBookings=_useState2[1];useEffect(function(){if(user){fetchBookings();}},[user]);var fetchBookings=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(BASE_URL,\"/booking/provider/\").concat(user===null||user===void 0?void 0:user._id));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setBookings(data.reverse());_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error('Failed to fetch Bookings:',_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchBookings(){return _ref3.apply(this,arguments);};}();var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),Allbookings=_useState4[0],setAllBookings=_useState4[1];useEffect(function(){if(user){fetchAllBookings();}},[user]);var fetchAllBookings=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,result,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(BASE_URL,\"/booking\"));case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;data=result.data||[];setAllBookings(data.reverse());_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.error('Failed to fetch Bookings:',_context2.t0);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,11]]);}));return function fetchAllBookings(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[user&&user.role=='provider'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mt-5 mb-3\",children:\"Bookings:\"}),bookings&&bookings.map(function(booking,index){return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px'},className:\"col\",children:/*#__PURE__*/_jsx(BookingCard,{booking:booking})},index);})]}),user&&user.role=='admin'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mt-5 mb-3\",children:\"All Bookings:\"}),Allbookings&&Allbookings.map(function(book,index){return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px'},className:\"col\",children:/*#__PURE__*/_jsx(BookingCardAdmin,{book:book})},index);})]})]})});};export default Bookings;","map":{"version":3,"names":["React","useContext","useState","useEffect","AuthContext","BASE_URL","Bookings","user","BookingCard","booking","backgroundColor","tourName","fullName","userEmail","phone","guestSize","Date","bookAt","toLocaleDateString","BookingCardAdmin","book","providerId","bookings","setBookings","fetchBookings","fetch","_id","response","json","data","reverse","console","error","Allbookings","setAllBookings","fetchAllBookings","result","role","map","index","marginTop"],"sources":["/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/src/pages/Bookings.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\nimport { AuthContext } from '../context/AuthContext.js'\nimport { BASE_URL } from '../utils/config.js';\n\nconst Bookings = () => {\n\n    const { user } = useContext(AuthContext);\n\n    const BookingCard = ({ booking }) => {\n      return (\n        <div style={{ backgroundColor: '#faa935' }} className=\"card\">\n          <div className=\"card-body\">\n\n            <h5 className=\"card-title\">{booking.tourName}</h5>\n            <p className=\"card-title\">Booked by: {booking.fullName} | Email: {booking.userEmail}  |  Phone no: {booking.phone}</p>\n            <p className=\"card-text\">Guests: {booking.guestSize}</p>\n            <p className=\"card-text\">Booked for: {new Date(booking.bookAt).toLocaleDateString()}</p>\n          </div>\n        </div>\n      );\n    };\n    const BookingCardAdmin = ({ book }) => {\n        return (\n          <div style={{ backgroundColor: '#faa935' }} className=\"card\">\n            <div className=\"card-body\">\n              <h5 className=\"card-title\">{book.tourName}</h5>\n              <p className=\"card-title\">Booked by: {book.fullName} | Email: {book.userEmail} | Phone no: {book.phone}</p>\n              <p className=\"card-title\">Provider Id: {book.providerId}</p>\n              <p className=\"card-text\">Guests: {book.guestSize}</p>\n              <p className=\"card-text\">Booked for: {new Date(book.bookAt).toLocaleDateString()}</p>\n            </div>\n          </div>\n        );\n      };\n\n    const [bookings, setBookings] = useState(null);\n    useEffect(() => {\n      if (user) {\n        fetchBookings();\n      }\n    }, [user]);\n  \n    const fetchBookings = async () => {\n      try {\n        const response = await fetch(`${BASE_URL}/booking/provider/${user?._id}`);\n        const data = await response.json();\n        setBookings(data.reverse());\n      } catch (error) {\n        console.error('Failed to fetch Bookings:', error);\n      }\n    };\n\n    const [Allbookings, setAllBookings] = useState(null);\n    useEffect(() => {\n      if (user) {\n        fetchAllBookings();\n      }\n    }, [user]);\n  \n    const fetchAllBookings = async () => {\n      try {\n        const response = await fetch(`${BASE_URL}/booking`);\n        const result = await response.json();\n        const data = result.data || [];\n        setAllBookings(data.reverse());\n      } catch (error) {\n        console.error('Failed to fetch Bookings:', error);\n      }\n    };\n\n  return (\n      <div>\n        <div className=\"container\">\n\n        \n\n        {user && user.role == 'provider' && (\n        <div>\n        <h3 className=\"mt-5 mb-3\">Bookings:</h3>\n          {bookings && bookings.map((booking, index) => (\n            <div style={{marginTop: '10px'}} className=\"col\" key={index}>\n              <BookingCard booking={booking} />\n            </div>\n            \n          ))}\n        </div>\n        )}\n        {user && user.role == 'admin' && (\n        <div>\n        <h3 className=\"mt-5 mb-3\">All Bookings:</h3>\n          {Allbookings && Allbookings.map((book, index) => (\n            <div style={{marginTop: '10px'}} className=\"col\" key={index}>\n              <BookingCardAdmin book={book} />\n            </div>\n            \n          ))}\n        </div>\n        )}\n        </div>\n        </div>\n  )\n}\n\nexport default Bookings\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}