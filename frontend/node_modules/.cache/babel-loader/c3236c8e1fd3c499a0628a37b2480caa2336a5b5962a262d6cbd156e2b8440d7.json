{"ast":null,"code":"var _jsxFileName = \"/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/src/pages/Bookings.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from 'react';\nimport { AuthContext } from '../context/AuthContext.js';\nimport { BASE_URL } from '../utils/config.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Bookings = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const BookingCard = _ref => {\n    let {\n      booking\n    } = _ref;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#faa935'\n      },\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: booking.tourName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 14,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-title\",\n          children: [\"Booked by: \", booking.fullName, \" | Email: \", booking.userEmail, \"  |  Phone no: \", booking.phone]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Guests: \", booking.guestSize]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Booked for: \", new Date(booking.bookAt).toLocaleDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 9\n    }, this);\n  };\n  const BookingCardAdmin = _ref2 => {\n    let {\n      book\n    } = _ref2;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#faa935'\n      },\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: book.tourName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-title\",\n          children: [\"Booked by: \", book.fullName, \" | Email: \", book.userEmail, \" | Phone no: \", book.phone]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-title\",\n          children: [\"Provider Id: \", book.providerId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Guests: \", book.guestSize]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Booked for: \", new Date(book.bookAt).toLocaleDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 11\n    }, this);\n  };\n  const [bookings, setBookings] = useState(null);\n  useEffect(() => {\n    if (user) {\n      fetchBookings();\n    }\n  }, [user]);\n  const fetchBookings = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/booking/provider/${user === null || user === void 0 ? void 0 : user._id}`);\n      const data = await response.json();\n      setBookings(data.reverse());\n    } catch (error) {\n      console.error('Failed to fetch Bookings:', error);\n    }\n  };\n  const [Allbookings, setAllBookings] = useState(null);\n  useEffect(() => {\n    if (user) {\n      fetchAllBookings();\n    }\n  }, [user]);\n  const fetchAllBookings = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/booking`);\n      const result = await response.json();\n      const data = result.data || [];\n      setAllBookings(data.reverse());\n    } catch (error) {\n      console.error('Failed to fetch Bookings:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [user && user.role == 'provider' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mt-5 mb-3\",\n          children: \"Bookings:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }, this), bookings && bookings.map((booking, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '10px'\n          },\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(BookingCard, {\n            booking: booking\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), user && user.role == 'admin' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mt-5 mb-3\",\n          children: \"All Bookings:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }, this), Allbookings && Allbookings.map((book, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '10px'\n          },\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(BookingCardAdmin, {\n            book: book\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 7\n  }, this);\n};\n_s(Bookings, \"av64FXaE8Nbgggbnfao2pHxTZec=\");\n_c = Bookings;\nexport default Bookings;\nvar _c;\n$RefreshReg$(_c, \"Bookings\");","map":{"version":3,"names":["React","useContext","useState","useEffect","AuthContext","BASE_URL","Bookings","user","BookingCard","booking","backgroundColor","tourName","fullName","userEmail","phone","guestSize","Date","bookAt","toLocaleDateString","BookingCardAdmin","book","providerId","bookings","setBookings","fetchBookings","response","fetch","_id","data","json","reverse","error","console","Allbookings","setAllBookings","fetchAllBookings","result","role","map","index","marginTop"],"sources":["/Users/akshansh/workspace/Minor II/TravBook/reactjs-tours-travels-booking/frontend/src/pages/Bookings.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\nimport { AuthContext } from '../context/AuthContext.js'\nimport { BASE_URL } from '../utils/config.js';\n\nconst Bookings = () => {\n\n    const { user } = useContext(AuthContext);\n\n    const BookingCard = ({ booking }) => {\n      return (\n        <div style={{ backgroundColor: '#faa935' }} className=\"card\">\n          <div className=\"card-body\">\n\n            <h5 className=\"card-title\">{booking.tourName}</h5>\n            <p className=\"card-title\">Booked by: {booking.fullName} | Email: {booking.userEmail}  |  Phone no: {booking.phone}</p>\n            <p className=\"card-text\">Guests: {booking.guestSize}</p>\n            <p className=\"card-text\">Booked for: {new Date(booking.bookAt).toLocaleDateString()}</p>\n          </div>\n        </div>\n      );\n    };\n    const BookingCardAdmin = ({ book }) => {\n        return (\n          <div style={{ backgroundColor: '#faa935' }} className=\"card\">\n            <div className=\"card-body\">\n              <h5 className=\"card-title\">{book.tourName}</h5>\n              <p className=\"card-title\">Booked by: {book.fullName} | Email: {book.userEmail} | Phone no: {book.phone}</p>\n              <p className=\"card-title\">Provider Id: {book.providerId}</p>\n              <p className=\"card-text\">Guests: {book.guestSize}</p>\n              <p className=\"card-text\">Booked for: {new Date(book.bookAt).toLocaleDateString()}</p>\n            </div>\n          </div>\n        );\n      };\n\n    const [bookings, setBookings] = useState(null);\n    useEffect(() => {\n      if (user) {\n        fetchBookings();\n      }\n    }, [user]);\n  \n    const fetchBookings = async () => {\n      try {\n        const response = await fetch(`${BASE_URL}/booking/provider/${user?._id}`);\n        const data = await response.json();\n        setBookings(data.reverse());\n      } catch (error) {\n        console.error('Failed to fetch Bookings:', error);\n      }\n    };\n\n    const [Allbookings, setAllBookings] = useState(null);\n    useEffect(() => {\n      if (user) {\n        fetchAllBookings();\n      }\n    }, [user]);\n  \n    const fetchAllBookings = async () => {\n      try {\n        const response = await fetch(`${BASE_URL}/booking`);\n        const result = await response.json();\n        const data = result.data || [];\n        setAllBookings(data.reverse());\n      } catch (error) {\n        console.error('Failed to fetch Bookings:', error);\n      }\n    };\n\n  return (\n      <div>\n        <div className=\"container\">\n\n        \n\n        {user && user.role == 'provider' && (\n        <div>\n        <h3 className=\"mt-5 mb-3\">Bookings:</h3>\n          {bookings && bookings.map((booking, index) => (\n            <div style={{marginTop: '10px'}} className=\"col\" key={index}>\n              <BookingCard booking={booking} />\n            </div>\n            \n          ))}\n        </div>\n        )}\n        {user && user.role == 'admin' && (\n        <div>\n        <h3 className=\"mt-5 mb-3\">All Bookings:</h3>\n          {Allbookings && Allbookings.map((book, index) => (\n            <div style={{marginTop: '10px'}} className=\"col\" key={index}>\n              <BookingCardAdmin book={book} />\n            </div>\n            \n          ))}\n        </div>\n        )}\n        </div>\n        </div>\n  )\n}\n\nexport default Bookings\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}